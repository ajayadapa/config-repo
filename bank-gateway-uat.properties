# JWT Config
jwt.secret = MySuperSecretKeyForGateway1234567890
jwt.expiration=3600000

# --- Resilience4j Rate Limiter Config ---
# Login
resilience4j.ratelimiter.instances.loginLimiter.limitForPeriod=3
resilience4j.ratelimiter.instances.loginLimiter.limitRefreshPeriod=10s
resilience4j.ratelimiter.instances.loginLimiter.timeoutDuration=0
# Account APIs
resilience4j.ratelimiter.instances.accountLimiter.limitForPeriod=10
resilience4j.ratelimiter.instances.accountLimiter.limitRefreshPeriod=10s
resilience4j.ratelimiter.instances.accountLimiter.timeoutDuration=0
# Customer APIs
resilience4j.ratelimiter.instances.customerLimiter.limitForPeriod=10
resilience4j.ratelimiter.instances.customerLimiter.limitRefreshPeriod=10s
resilience4j.ratelimiter.instances.customerLimiter.timeoutDuration=0

# --- End of Resilience4j Rate Limiter Config ---

# ========== R2DBC MySQL ==========
spring.r2dbc.url=r2dbc:mysql://localhost:3306/auth_db
spring.r2dbc.username=root
spring.r2dbc.password=root

# Enable connection pool (important)
spring.r2dbc.pool.enabled=true
spring.r2dbc.pool.initial-size=5
spring.r2dbc.pool.max-size=20

# Optional but recommended
spring.r2dbc.pool.max-idle-time=30m

# --- Circuit Breaker Config ---
resilience4j.circuitbreaker.instances.customerServiceCB.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.customerServiceCB.slidingWindowType=COUNT_BASED
resilience4j.circuitbreaker.instances.customerServiceCB.slidingWindowSize=5
resilience4j.circuitbreaker.instances.customerServiceCB.minimumNumberOfCalls=3
resilience4j.circuitbreaker.instances.customerServiceCB.failureRateThreshold=50
resilience4j.circuitbreaker.instances.customerServiceCB.waitDurationInOpenState=10s

# --- Circuit Breaker Config ---
resilience4j.circuitbreaker.instances.accountServiceCB.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.accountServiceCB.slidingWindowType=COUNT_BASED
resilience4j.circuitbreaker.instances.accountServiceCB.slidingWindowSize=5
resilience4j.circuitbreaker.instances.accountServiceCB.minimumNumberOfCalls=3
resilience4j.circuitbreaker.instances.accountServiceCB.failureRateThreshold=50
resilience4j.circuitbreaker.instances.accountServiceCB.waitDurationInOpenState=10s

